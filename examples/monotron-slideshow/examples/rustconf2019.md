
## Embedded Rust and the

^R€€€€€^K ^R^y€€€€€^K^k ^Y€€  €^K ^G€€€€€^K ^G^y€^k€^y€^k€€^K ^B€€€€^K ^B€€€€€^K ^M€€  €^W
^R≤^K ^R≤^K ^R≤^K ^R^y≤^K^k   ^R^y≤^K^k ^Y≤^K ^Y≤ ≤^K ^G≤^K   ^G≤^K ^G ^K ^G^y≤^K^k ^G ^K ^B^g≤^K^k  ^B^g≤^K^k ^B≤^K   ^B≤^K ^M≤^K ^M≤ ≤^W
^R±^K ^R±^K ^R±^K ^R^y±^K^k   ^R^y±^K^k ^Y±^K  ^Y±±^K ^G±^K   ^G±^K ^G ^K ^G^y±^K^k ^G ^K ^B^g±^K^k ^B^g±^k ^K ^B±^K   ^B±^K ^M±^K ^M ±±^W
^R∞ ∞^K ^R∞^K ^R^y∞∞∞∞∞^K^k ^Y∞   ∞^K ^G∞∞∞∞∞^K ^G  ^y∞^k  ^K ^B^g∞^k  ^g∞^K^k ^B∞∞∞∞∞^K ^M∞   ∞^W

* Jonathan 'theJPster' Pallant
* RustConf, August 2019
---

## Preamble: Introductions

* @thejpster (Github)
* @therealjpster (Twitter)
* keybase.io/thejpster
* github.com/rust-embedded

---

## Agenda

* Act 1 - Embedded Rust <--
* Act 2 - The Monotron
* Act 3 - Demo Time
---

                    €€€€€€€
                 €€€€€€±€€€€€€
               €€€€€€€±±±€€€€€€€
              €€€€€€ €€±€€ €€€€€€
             €€€€     €€€     €€€€
            €€€€       €       €€€€
           €€€€                 €€€€
          €€€€                   €€€€
          €€€€€€€€€€€€€€€€€€      €€€
         €€€€€€€€€€€€€€€€€€€€      €€€
         €€€€€€€€€€€€€€€€€€€€€     €€€
         €±€€€€€€€€      €€€€€€   €€±€
        €±±±€€ €€€€       €€€€€  €€±±±€
        €€±€€  €€€€       €€€€€   €€±€€
        €€€€   €€€€      €€€€€     €€€€
        €€€    €€€€€€€€€€€€€€       €€€
        €€€    €€€€€€€€€€€€€        €€€
        €€€    €€€€€€€€€€€          €€€
        €€€    €€€€€€€€€€€€         €€€
         €€€€€€€€€€    €€€€€     €€€€€
         €€€€€€€€€€     €€€€€€€€€€€€€€
         €€€€€€€€€€€     €€€€€€€€€€€€€
          €€€                €€€€€€€€
          €€€€€€€€€          €€€€€€€€
           €€€€€±€€          €€±€€€€
            €€€±±±€          €±±±€€
             €€€±€€          €€±€€
              €€€€€€       €€€€€€
               €€€€€€€€€€€€€€€€€
                 €€€€€€€€€€€€€
                    €€€€€€€
---
^B^k
    ^w€€€€€€€€€€€€€€€       €€€€€€€€€€€€€€€^k
    ^w€€€€€€€€€€€€      ±      €€€€€€€€€€€€^k
  € ^w€€€€€€€€€€       ±±±       €€€€€€€€€€^k €
 €€ ^w€€€€€€€€€      €  ±  €      €€€€€€€€€^k €€
  € ^w€€€€€€€€    €€€€€   €€€€€    €€€€€€€€^k €
    ^w€€€€€€€    €€€€€€€ €€€€€€€    €€€€€€€^k
  € ^w€€€€€€    €€€€€€€€€€€€€€€€€    €€€€€€^k €
 €€ ^w€€€€€                  €€€€€€   €€€€€^k €€
  € ^w€€€€                    €€€€€€   €€€€^k €
    ^w€€€€                     €€€€€   €€€€^k
  € ^w€€€€ ±        €€€€€€      €€€  ± €€€€^k €
 €€ ^w€€€ ±±±  €    €€€€€€€     €€  ±±± €€€^k €€
  € ^w€€€  ±  €€    €€€€€€€     €€€  ±  €€€^k €
    ^w€€€    €€€    €€€€€€     €€€€€    €€€^k
  € ^w€€€   €€€€              €€€€€€€   €€€^k €
 €€ ^w€€€   €€€€             €€€€€€€€   €€€^k €€
  € ^w€€€   €€€€           €€€€€€€€€€   €€€^k €
    ^w€€€   €€€€            €€€€€€€€€   €€€^k
  € ^w€€€€          €€€€     €€€€€     €€€€^k €
 €€ ^w€€€€          €€€€€              €€€€^k €€
  € ^w€€€€           €€€€€             €€€€^k €
    ^w€€€€€   €€€€€€€€€€€€€€€€€€€€€   €€€€€^k
  € ^w€€€€€€     ±  €€€€€€€€€€  ±    €€€€€€^k €
 €€ ^w€€€€€€€   ±±± €€€€€€€€€€ ±±±  €€€€€€€^k €€
  € ^w€€€€€€€€   ±  €€€€€€€€€€  ±  €€€€€€€€^k €
    ^w€€€€€€€€€      €€€€€€€      €€€€€€€€€^k
  € ^w€€€€€€€€€€                 €€€€€€€€€€^k €
 €€ ^w€€€€€€€€€€€€             €€€€€€€€€€€€^k €€
  € ^w€€€€€€€€€€€€€€€       €€€€€€€€€€€€€€€^k €
    ^w±±±€±€€€±€±±±€€±±±€±±±€€±±±€€±±±€±±±€^k
  € ^w±€€€±±€±±€±€€±€±€€€±€€±€±€€±€±€€€±€€±^k €
 €€ ^w±±±€±€±€±€±±±€€±±±€±€€±€±€€±€±±±€±€€±^k €€
  € ^w±€€€±€€€±€±€€±€±€€€±€€±€±€€±€±€€€±€€±^k €
    ^w±±±€±€€€±€±±±€€±±±€±±±€€±±±€€±±±€±±±€^k
---

## Act 1: Things you need for Embedded Rust

1. LLVM Backend
1. Target File
1. libcore
---

## Act 1: Atomic Section / Closures Example

 ^Ypub^W ^Cfn^W free<F, R>(f: F) -> R
 ^Ywhere^W
     F: ^CFnOnce^W(&CriticalSection) -> R,
 {
     ^Clet^W primask ^Y=^W register::primask::read();
     ^Cdisable^W();
     ^Clet^W r = f(^Yunsafe^W {
         ^Y&^CCriticalSection^W::new()
     });
     ^Yif^W primask.is_active() {
         ^Yunsafe^W { enable() }
     }
     r
 }
---

## Act 1: Deref / Memory Mapped I/O Example

 ^Cimpl^W CBP {

   ^Ypub^W (^Ycrate^W) ^Yunsafe^W ^Cfn^W new() -> Self {
       CBP {
           _marker: ^CPhantomData^W
       }
   }

   ^Ypub^W ^Cfn^W ptr() -> ^Y*const^W RegisterBlock {
       0xE000_EF50 ^Yas *const _^W
   }

 }

 ^Cimpl^W ops::Deref ^Yfor^W CBP {
     type Target = ^CRegisterBlock^W;

     ^Cfn^W deref(&self) -> ^Y&^CSelf^W::Target {
         ^Yunsafe^W { ^Y&*^CSelf^W::ptr() }
     }

 }
---

## Act 1: A stack of crates...

* Your Application!
* Board Support Package (BSP)
* Hardware Abstration Layer (HAL)
* Peripheral Access Crates (PACs)
* CPU Runtime
---

## Agenda

* Act 1 - Embedded Rust
* Act 2 - The Monotron <--
* Act 3 - Demo Time
---

## Act 2: The Commodore 64
^C
^b€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€^k
^b€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€^k
^b€€€                                        €€€^k
^b€€€    **** COMMODORE 64 BASIC V2 ****     €€€^k
^b€€€                                        €€€^k
^b€€€ 64K RAM SYSTEM  38911 BASIC BYTES FREE €€€^k
^b€€€                                        €€€^k
^b€€€READY.                                  €€€^k
^b€€€10 FOR X = 1 TO 5                       €€€^k
^b€€€20 PRINT "HELLO RUSTCONF"               €€€^k
^b€€€30 NEXT                                 €€€^k
^b€€€RUN                                     €€€^k
^b€€€HELLO RUSTCONF                          €€€^k
^b€€€HELLO RUSTCONF                          €€€^k
^b€€€HELLO RUSTCONF                          €€€^k
^b€€€HELLO RUSTCONF                          €€€^k
^b€€€HELLO RUSTCONF                          €€€^k
^b€€€                                        €€€^k
^b€€€READY.                                  €€€^k
^b€€€                                        €€€^k
^b€€€                                        €€€^k
^b€€€                                        €€€^k
^b€€€                                        €€€^k
^b€€€                                        €€€^k
^b€€€                                        €€€^k
^b€€€                                        €€€^k
^b€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€^k
^b€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€^k
---

## Act 2: Goals for the project

* To distract me...
* Can you generate video with Rust?
* How much can you squeeze from one chip?
---

## STM32F7 Discovery

 ^G€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€
 ^G€^W€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€^G€
 ^G€^W€                                        €^G€
 ^G€^W€                                        €^G€
 ^G€^W€  ^Y€€€€ €€€€€ €   € €€€€ €€€€ €€€ €€€€   ^W€^G€
 ^G€^W€  ^Y€      €   €€ €€    €    € €      €   ^W€^G€
 ^G€^W€  ^Y€€€€   €   € € €  €€€ €€€€ €€€    €   ^W€^G€
 ^G€^W€     ^Y€   €   €   €    € €    €      €   ^W€^G€
 ^G€^W€  ^Y€€€€   €   €   € €€€€ €€€€ €      €   ^W€^G€
 ^G€^W€                                        €^G€
 ^G€^W€                                        €^G€
 ^G€^W€                                        €^G€
 ^G€^W€ ^Y€€€  € €€€ €€€ €€€€ €   € €€€ €€€€ € € ^W€^G€
 ^G€^W€ ^Y€ €€ € €   €   €  € €   € €   €  € € € ^W€^G€
 ^G€^W€ ^Y€ €€ € €€€ €   €  €  € €  €€€ €€€€ € € ^W€^G€
 ^G€^W€ ^Y€ €€ €   € €   €  €  € €  €   € €   €  ^W€^G€
 ^G€^W€ ^Y€€€  € €€€ €€€ €€€€   €   €€€ €  €  €  ^W€^G€
 ^G€^W€                                        €^G€
 ^G€^W€                                        €^G€
 ^G€^W€                                        €^G€
 ^G€^W€                                        €^G€
 ^G€^W€                                        €^G€
 ^G€^W€                                        €^G€
 ^G€^W€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€^G€
 ^G€€€€€^C€€€€^G€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€
 ^G€€€€€^C€€€€^G€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€
      ^C€€€€     €€€€                €€€€
---
## Tiva-C Launchpad

          ^W‹‹‹^R
     €€€€€^W^rﬂﬂﬂ^R^k€€€€€€€€€€€€€€€€€€€€€
     €€€€€€€€€€€€€€€€€€€€€€€€€€€€€
     €€€€€€€€€      €€€€€€€€€€€€€€
    ^W€^R€€€€€€€€€      €€€€€€€€€€€€€€
    ^W€^R€€€€€€€€€ ^WTM4C ^R€€€€€€€€€€€€€€
    ^W€^R€€€€€€€€€ ^W123G ^R€€€€€€€€€€€€€€
     €€€€€€€€€      €€€€€€€€€€€€€€
     €€€€€€€€€      €€€€€€€€€€€€€€
     €€€€€€€€€€€€€€€€€€€€€€€€€€€€€
     €€€€€€€^Y^rooooo^R^k€€€€€€€€€€€€€€€€€
     €€€€€€€€€€€€€€€€€€€€€€€€€€€€€
     €€€€€€€€€€€€€€€€€€€€€€€€€€€€€
     €€€€€€€€€€€€€€^K^w€^R^k€€€€€€€€€€€€€€
     €€^Y^rOO^R^k€€€€€€€€€^K^w€^k€^w€^R^k€€€€€€€€€^Y^rOO^R^k€€
     €€^Y^rOO^R^k€€€€€€€€^K^w€^k€€€^w€^R^k€€€€€€€€^Y^rOO^R^k€€
     €€^Y^rOO^R^k€€€€€€€^K^w€^W^kTM4C^K€^w€^R^k€€€€€€€^Y^rOO^R^k€€
     €€^Y^rOO^R^k€€€€€€^K^w€^k€^W 123G^K€^w€^R^k€€€€€€^Y^rOO^R^k€€
     €€^Y^rOO^R^k€€€€€€€^K^w€^R^k     ^K^w€^R^k€€€€€€€^Y^rOO^R^k€€
     €€^Y^rOO^R^k€€€€€€€€^K^w€^R^k   ^K^w€^R^k€€€€€€€€^Y^rOO^R^k€€
     €€^Y^rOO^R^k€€€€€€€€€^K^w€^R^k ^K^w€^R^k€€€€€€€€€^Y^rOO^R^k€€
     €€^Y^rOO^R^k€€€€€€€€€€^K^w€^R^k€€€€€€€€€€^Y^rOO^R^k€€
     €€^Y^rOO^R^k€€€€€€€€€€€€€€€€€€€€€^Y^rOO^R^k€€
     €€^Y^rOO^R^k€€€€€€€€€€€€€€€€€€€€€^Y^rOO^R^k€€
     €€€€€€€€€€€€€€€€€€€€€€€€€€€€€
     €€€€€^W€€€^R€€€€€€€€€€€€€^W€€€^R€€€€€
     €€€€€^W€ €^R€€€€€€€€€€€€€^W€ €^R€€€€€
     €€€€€^W€€€^R€€€€€€€€€€€€€^W€€€^R€€€€€
     €€€€€€€€€€€€€€€€€€€€€€€€€€€€€
---

## Act 2: Generating Analog Video
^e
 ^W…ÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕª^R±±±±
 ^W∫^B±±±±±±±±±±±±±±±±±±±±±±±±±±±±^W∫^R±±±±
 ^W∫^B±±±±±±±±±±±±±±±±±±±±±±±±±±±±^W∫^R±±±±
 ^W∫^B±±±±±±±±±±±±±±±±±±±±±±±±±±±±^W∫^R±^WH^R±±
 ^W∫^bƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒ^k∫^R±^Wo^R±±
 ^W∫^B±±±±±±±±±±±±±±±±±±±±±±±±±±±±^W∫^R±^Wr^R±±
 ^W∫^bƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒ^k∫^R±^Wi^R±±
 ^W∫^B±±±±±±±±±±±±±±±±±±±±±±±±±±±±^W∫^R±^Wz^R±±
 ^W∫^bƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒ^k∫^R±^Wo^R±±
 ^W∫^B±±±±±±±±±±±±±±±±±±±±±±±±±±±±^W∫^R±^Wn^R±±
 ^W∫^B±±±±±±±±±±±±±±±±±±±±±±±±±±±±^W∫^R±^Wt^R±±
 ^W∫^B±±±±±±±±±±±±±±±±±±±±±±±±±±±±^W∫^R±^Wa^R±±
 ^W∫^B±±±±±±±±±±±±±±±±±±±±±±±±±±±±^W∫^R±^Wl^R±±
 ^W∫^B±±±±±±±±±±±±±±±±±±±±±±±±±±±±^W∫^R±±±±
 ^W∫^B±±±±±±±±±±±±±±±±±±±±±±±±±±±±^W∫^R±^WB^R±±
 ^W∫^B±±±±±±±±±±±±±±±±±±±±±±±±±±±±^W∫^R±^Wl^R±±
 ^W∫^B±±±±±±±±±±±±±±±±±±±±±±±±±±±±^W∫^R±^Wa^R±±
 ^W∫^B±±±±±±±±±±±±±±±±±±±±±±±±±±±±^W∫^R±^Wn^R±±
 ^W∫^B±±±±±±±±±±±±±±±±±±±±±±±±±±±±^W∫^R±^Wk^R±±
 ^W∫^B±±±±±±±±±±±±±±±±±±±±±±±±±±±±^W∫^R±^Wi^R±±
 ^W∫^B±±±±±±±±±±±±±±±±±±±±±±±±±±±±^W∫^R±^Wn^R±±
 ^W∫^B±±±±±±±±±±±±±±±±±±±±±±±±±±±±^W∫^R±^Wg^R±±
 ^W∫^B±±±±±±±±±±±±±±±±±±±±±±±±±±±±^W∫^R±±±±
 ^W∫^B±±±±±±±±±±±±±±±±±±±±±±±±±±±±^W∫^R±±±±
 ^W∫^B±±±±±±±±±±±±±±±±±±±±±±±±±±±±^W∫^R±±±±
 ^W»ÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕÕº^R±±±±
 ^G±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±
 ±±±±±±±^WVertical blanking^G±±±±±±±±±±
 ±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±
---

## Act 2: VGA Timing

* tinyvga.com/vga-timing
* 640 x 480 @ 60 Hz = 25.175 MHz
* 720 x 400 @ 70 Hz = 28.322 MHz
* 800 x 600 @ 60 Hz = 40.000 MHz
---

## Act 2: Rendering Mono/RGB Bitmaps

* Mono analog video
          ⁄----------------------ø
          ≥                      ≥
          ≥                      ≥
 ƒƒø   ⁄ƒƒŸ                      ¿ƒƒƒƒƒƒƒƒ
   ¿ƒƒƒŸ

* RGB analog video
 ^R
          ⁄----------------------ø
          ≥±±±±±±±±±±±±±±±±±±±±±±≥
          ≥±±±±±±±±±±±±±±±±±±±±±±≥
 ƒƒƒƒƒƒƒƒƒŸ                      ¿ƒƒƒƒƒƒƒƒ
 ^G
          ⁄----------------------ø
          ≥±±±±±±±±±±±±±±±±±±±±±±≥
          ≥±±±±±±±±±±±±±±±±±±±±±±≥
 ƒƒƒƒƒƒƒƒƒŸ                      ¿ƒƒƒƒƒƒƒƒ
 ^B
          ⁄----------------------ø
          ≥±±±±±±±±±±±±±±±±±±±±±±≥
          ≥±±±±±±±±±±±±±±±±±±±±±±≥
 ƒƒƒƒƒƒƒƒƒŸ                      ¿ƒƒƒƒƒƒƒƒ
---

## Act 2: Text Attributes

^e
⁄ƒƒ¬ƒƒ¬ƒƒ¬ƒƒ¬ƒƒ¬ƒƒ¬ƒƒ¬ƒƒø
≥  ≥^G€€^W≥^G€€^W≥^G€€^W≥^G€€^W≥^G€€^W≥  ≥  ≥
≥  ≥^G€€^W≥^G€€^W≥^G€€^W≥^G€€^W≥^G€€^W≥  ≥  ≥
√ƒƒ≈ƒƒ≈ƒƒ≈ƒƒ≈ƒƒ≈ƒƒ≈ƒƒ≈ƒƒ¥
≥^G€€^W≥  ≥  ≥  ≥  ≥  ≥^G€€^W≥  ≥
≥^G€€^W≥  ≥  ≥  ≥  ≥  ≥^G€€^W≥  ≥
√ƒƒ≈ƒƒ≈ƒƒ≈ƒƒ≈ƒƒ≈ƒƒ≈ƒƒ≈ƒƒ¥
≥^G€€^W≥  ≥  ≥^G€€^W≥^G€€^W≥  ≥^G€€^W≥  ≥
≥^G€€^W≥  ≥  ≥^G€€^W≥^G€€^W≥  ≥^G€€^W≥  ≥
√ƒƒ≈ƒƒ≈ƒƒ≈ƒƒ≈ƒƒ≈ƒƒ≈ƒƒ≈ƒƒ¥
≥^G€€^W≥  ≥^G€€^W≥  ≥  ≥  ≥^G€€^W≥  ≥
≥^G€€^W≥  ≥^G€€^W≥  ≥  ≥  ≥^G€€^W≥  ≥
√ƒƒ≈ƒƒ≈ƒƒ≈ƒƒ≈ƒƒ≈ƒƒ≈ƒƒ≈ƒƒ¥
≥^G€€^W≥  ≥^G€€^W≥  ≥  ≥  ≥^G€€^W≥  ≥
≥^G€€^W≥  ≥^G€€^W≥  ≥  ≥  ≥^G€€^W≥  ≥
√ƒƒ≈ƒƒ≈ƒƒ≈ƒƒ≈ƒƒ≈ƒƒ≈ƒƒ≈ƒƒ¥
≥^G€€^W≥  ≥  ≥^G€€^W≥^G€€^W≥  ≥^G€€^W≥  ≥
≥^G€€^W≥  ≥  ≥^G€€^W≥^G€€^W≥  ≥^G€€^W≥  ≥
√ƒƒ≈ƒƒ≈ƒƒ≈ƒƒ≈ƒƒ≈ƒƒ≈ƒƒ≈ƒƒ¥
≥^G€€^W≥  ≥  ≥  ≥  ≥  ≥^G€€^W≥  ≥
≥^G€€^W≥  ≥  ≥  ≥  ≥  ≥^G€€^W≥  ≥
√ƒƒ≈ƒƒ≈ƒƒ≈ƒƒ≈ƒƒ≈ƒƒ≈ƒƒ≈ƒƒ¥
≥  ≥^G€€^W≥^G€€^W≥^G€€^W≥^G€€^W≥^G€€^W≥  ≥  ≥
≥  ≥^G€€^W≥^G€€^W≥^G€€^W≥^G€€^W≥^G€€^W≥  ≥  ≥
¿ƒƒ¡ƒƒ¡ƒƒ¡ƒƒ¡ƒƒ¡ƒƒ¡ƒƒ¡ƒƒŸ
---

## Act 2: Show me the source!

    ^Cfor^W (ch, attr) ^Cin^W row.glyphs.iter() {
      ^Clet^W index ^Y=^W (*ch ^Cas^W isize) ^Y*^W
        (MAX_FONT_HEIGHT ^Cas^W isize);
      ^Clet^W w ^Y=^W ^Cunsafe^W {
        *font_table.offset(index) };
      ^Clet^W rgb_addr ^Y=^W ^Cunsafe^W {
        RGB_MAPS
          .as_ptr()
          .offset(
            (
              (attr.0 ^Cas^W isize) ^Y*^W
              256_isize
            ) ^Y+^W (w ^Cas^W isize)
          )
      };
      ^Clet^W rgb_word ^Y=^W ^Cunsafe^W { *rgb_addr };
      hw.write_pixels(
        rgb_word ^Y>>^W 16,
        rgb_word ^Y>>^W 8,
        rgb_word
      );
    }
---

## Act 2: Implementation Failure...

 ^R
          ⁄----------------------ø
          ≥±±±±±±±±±±±±±±±±±±±±±±≥
          ≥±±±±±±±±±±±±±±±±±±±±±±≥
 ƒƒƒƒƒƒƒƒƒ¡----------------------¡ƒƒƒƒƒƒƒƒƒ
 ^G
              ⁄----------------------ø
              ≥±±±±±±±±±±±±±±±±±±±±±±≥
              ≥±±±±±±±±±±±±±±±±±±±±±±≥
 ƒƒƒƒƒƒƒƒƒƒƒƒƒ¡----------------------¡ƒƒƒƒƒ
 ^B
                  ⁄----------------------ø
                  ≥±±±±±±±±±±±±±±±±±±±±±±≥
                  ≥±±±±±±±±±±±±±±±±±±±±±±≥
 ƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒƒ¡----------------------¡ƒ

* Fringing effect

   ^r  ^y  ^w           ^c  ^b  ^k
   ^r  ^y  ^w           ^c  ^b  ^k
   ^r  ^y  ^w           ^c  ^b  ^k
   ^r  ^y  ^w           ^c  ^b  ^k
   ^r  ^y  ^w           ^c  ^b  ^k
   ^r  ^y  ^w           ^c  ^b  ^k
---

## Act 2: Memory Layout

     ^b…ÕÕÕÕÕÕÕÕÕÕÕÕÕÕª^k 0x8000_8000
     ^b∫              ∫^k
     ^b∫ Application  ∫^k
     ^b∫              ∫^k
     ^bÃÕÕÕÕÕÕÕÕÕÕÕÕÕÕπ^k 0x8000_2000
     ^b∫              ∫^k
     ^b∫ bss          ∫^k
     ^b∫              ∫^k
     ^bÃÕÕÕÕÕÕÕÕÕÕÕÕÕÕπ^k 0x8000_1000
     ^b∫              ∫^k
     ^b∫ data         ∫^k
     ^b∫              ∫^k
     ^b»ÕÕÕÕÕÕÕÕÕÕÕÕÕÕº^k 0x8000_0000

     ^r…ÕÕÕÕÕÕÕÕÕÕÕÕÕÕª^k 0x0004_0000
     ^r∫              ∫^k
     ^r∫ data         ∫^k
     ^r∫              ∫^k
     ^rÃÕÕÕÕÕÕÕÕÕÕÕÕÕÕπ^k 0x0003_8xxx
     ^r∫              ∫^k
     ^r∫ rodata       ∫^k
     ^r∫              ∫^k
     ^rÃÕÕÕÕÕÕÕÕÕÕÕÕÕÕπ^k 0x0002_xxxx
     ^r∫              ∫^k
     ^r∫ text         ∫^k
     ^r∫              ∫^k
     ^rÃÕÕÕÕÕÕÕÕÕÕÕÕÕÕπ^k 0x0000_0200
     ^r∫ vector       ∫^k
     ^r»ÕÕÕÕÕÕÕÕÕÕÕÕÕÕº^k 0x0000_0000
---

## Act 2: Application Binary Interface

* 0x2000 - 0x2003: Pointer to init fn
* 0x2004 - 0x2FFF: Don't care!
* Structure of function pointers
---

## Act 2: Application Binary Interface

* putchar(char) -> int
* puts(const char[]) -> int
* readc() -> int
* wfvbi()
* kbhit() -> int
* move_cursor(row, col)
* change_font(font)
* get_joystick() -> u8
* set_cursor_visible(bool)

---

## Act 2: What else have we got?

* A PCB!
* RS-232 Serial Ports
* A real-time clock
* A printer port (tbc...)
* ... and there's more!

---

# Act 2: Would you like to see a demo?
---
